# 7차미프 총정리

### 미프 7차

### 개요

- 챗봇 만들기 프로젝트.
- Langchain과 chat gpt를 활용해 AI서비스를 만들고, Django로 백엔드를 처리, Amazon 서비스를 이용해 웹 서비스를 구현하고 deploy했다.

### 느낀점

- 프로젝트 할 시 코드실력이 진짜 중요하다.
    - 열심히 공부해서 기존에 팀원이 하던거를 1개라도 더 뺏어오려고 해야한다.
- 협업을 할 때, 코드를 합치는 법에 대해 신중하게 생각해야한다.
    - 어느쪽에서 합치는게 편할지

### 배운거

- API 키를 함부로 공개하면 안 된다. 이거 GIT에 그냥 올리면 해킹당한다.
- Langchain 기술이 어떤 건지 배웠다.
    - RAG란, 사전학습 된 LLM에 추가학습 대신, 데이터베이스를 주고 거기서 유사도를 뽑고, 프롬프트를 구성해서, LLM에 답변을 넣는 것이다.
    - 이 때 Vector DB 가 핵심이며, 이를 위한 크롤링 기술도 중요하다.
        - 크롤링 시 네이버 블로그 API를 따서 크롤링 하는 법을 공부했다.
    
- 백엔드 처리 흐름 정리
1. **Chat history가 부드럽게 추가**되면서 화면에 보여야함.
-.백엔드에서는 제출버튼이 눌릴 때마다 json형식으로 context를 전송하도록 로직구성.
-> context는 단순하게 query와 result로 된 딕셔너리.
-. 프론트엔드단에서 innerHTML에 +를 하는 식으로 히스토리를 자연스럽게 구성. (이렇게 하면 이전 메시지를 같이 보낼 필요가 없이 프론트엔드단에 히스토리가
저장될 수 있음)
-. **Ajax 방식**을 사용함. 프론트엔드에서 좀 더 부드러운 질문과 답변 ui 구성가능.
2. **Session, Memory** 구현 ★
    
    1) 봇에서 나갔다 들어오거나, 새로고침을 했다면 (get 방식) 메모리 초기화 되게 해놓았음.
    -. 초기화된 메모리를 세션에 저장.
    -. session에 memory하고 conversation key는 none상태임.
    
    2) 질문을 하면 post방식으로 요청
    -. AI 모델 구현되어있고, request정보를 가지고 세션에서 memory정보를 읽어옴.
    
    → 이 과정에서 **직렬화, 역직렬화**를 코드로 구현함.
    -. 왜인지 메모리에는 잘 저장이 되는데, 메모리를 기반으로 답변하는 기능을 상실한듯 보임.
    
    → 추후 해당 내용 분석필요.
    
3. **History** 구현.
-. **Chat이라는 장고의 모델**을 사용해서, 바로 채팅내용을 데이터베이스로 저장하게 했다.
-. Chat 객체에 filter라는 메서드가 있어서, index에서 url을 누르면 history view함수가 처리하고, 이 view함수는 chat을 필터한 거를 html로 넘겨서 렌더링한다.

---

이상 우리조가 했던 핵심에 대해 구현해봤고, 기타 구현 못해본거는

1. 챗봇 아이콘 클릭시 팝업이 따로 뜨는거. 
2. Chat GPT에 특정 말투로 답변하도록 프롬프트 구성해보기

→ 이 2개에 대해 추후에 구현해보고 싶다.

- Django Framework의 전체적인 구조에 대한 이해도가 한층 높아진 프로젝트.
- 전역변수는 함수내에서 참조는 가능하나 변경은 불가능함.
    - 변경하고 싶으면 global로 선언해야함.
- DOM, CSRF와 같은 용어에 대해 학습함.